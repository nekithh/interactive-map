mapboxgl.accessToken="pk.eyJ1IjoibmVraXRoaCIsImEiOiJjbHZjajJkcjkwZ3Q2MnNta2h0bndnajBtIn0.I9tfAtq2Z7wdhHNK_sR_-Q",$(document).ready((function(){$("#desc_event").on("input",(function(){console.log(this.scrollHeight),this.scrollHeight>112&&$(this).height(this.scrollHeight-30)}));new VanillaCalendar("#event_date",{input:!0,actions:{changeToInput(e,t){t.HTMLInputElement&&(t.selectedDates[0]?(t.HTMLInputElement.value=t.selectedDates[0],t.hide()):t.HTMLInputElement.value="")}},settings:{lang:"uk",visibility:{positionToInput:"center"}}}).init();const e=new mapboxgl.Map({container:"address-map",style:"mapbox://styles/mapbox/streets-v12",center:[-79.4512,43.6568],zoom:13});e.on("click",(function(e){var t,n=e.lngLat;t=n,fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/"+t.lng+","+t.lat+".json?access_token="+mapboxgl.accessToken).then((e=>e.json())).then((e=>{var t=e.features[0].place_name;$(".mapboxgl-ctrl-geocoder--input").val(t)})),$("#address-map").hide(),$(".wrapper").removeClass("full-hide")})),tinymce.init({selector:"#evdesc",menubar:"",height:277,toolbar:"undo bold italic underline strikethrough align emoticons redo"}),$(".btn-edit-evdesc").click((function(e){e.preventDefault(),$(".evdesc-edit").show(),$(".wrapper").addClass("full-hide")})),$(".evdesc-edit .evdesc-save").click((function(e){e.preventDefault(),$(".evdesc-edit").hide(),$(".wrapper").removeClass("full-hide"),$("#evdesc-content .textarea-content").html(tinymce.get("evdesc").getContent())})),e.on("load",(function(){$(".show-address-map").click((function(t){t.preventDefault(),$(".address-map").show(),$(".wrapper").addClass("full-hide"),t.stopPropagation(),e.resize()}))}));const t=new MapboxGeocoder({accessToken:mapboxgl.accessToken,mapboxgl:mapboxgl});document.getElementById("geocoder").appendChild(t.onAdd(e)),$(".mapboxgl-ctrl-geocoder--input").attr("placeholder","Впишіть адресу");const n=new Dropzone(".images-event",{url:"/upload",uploadMultiple:!0,previewTemplate:document.querySelector("#my-template").innerHTML,autoProcessQueue:!1,previewsContainer:".preview-container",init:function(){this.on("addedfile",(function(e){e.previewElement.querySelector(".dz-delete").addEventListener("click",(function(){n.removeFile(e)}))}))}});$('input[name="privacy"]').on("change",(function(){1==$(this).prop("checked")?$(this).parent().find(".switcher-text").text("Всі"):$(this).parent().find(".switcher-text").text("Тільки запрошені")}))}));